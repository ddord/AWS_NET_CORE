@{
    Layout = "_PopLayout";
    ViewData["Title"] = "Movie item registration";
}
@section Scripts {
    <script>
        var currentId = "@ViewBag.CurrentId";

        function fnDocumentReadyCommon() {
        }

        function insertMovieItem() {
            if (!m_Required.Check()) {
                return;
            }

            if ($("#txtTitle").val().trim() == "") {
                alert("Please enter the title.");
                return;
            }

            var insertParam = {
                title: $('#txtTitle').val().trim(),
                genre: $('#selectGenre').val(),
                director: $('#txtDirector').val().trim(),
                releaseTime: $('#txtReleaseTime').val().trim()
            }

            m_Ajax.Call('@Url.Action("InsertMovieItem")', insertParam, function (data) {
                if (data > 0) {
                    alert("Save.");
                    opener.fnDocumentReadyCommon()
                    m_Popup.Close();
                } else {
                    alert("Error: Please check for duplicate titles or other data");
                }
            });
        }

    </script>
}
<div>
    <div class="pop-header dp-flex mr-auto">
        <h6 class="title">@ViewData["Title"]</h6>
    </div>

    <div class="pop-content">
        <div class="pop-size optional-pop-padding">

            <div class="space-s"></div>

            <div class="tab-content flex-1 overflow-auto-y p-t-l">
                <table width="100%" class="tbl-basic">
                    <colgroup>
                        <col width="12%" />
                        <col width="38%" />
                        <col width="12%" />
                        <col width="38%" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <th>Title</th>
                            <td>
                                <input id="txtTitle" type="text" class="fm-def" style="width: 200px;" m_required="Title" />
                            </td>
                            <th>Genre</th>
                            <td>
                                <select id="selectGenre" class="fm-def" style="width:120px;">
                                    <option value="Action">Action</option>
                                    <option value="Animation">Animation</option>
                                    <option value="Comedy">Comedy</option>
                                    <option value="Crime">Crime</option>
                                    <option value="Drama">Drama</option>
                                    <option value="Experimental">Experimental</option>
                                    <option value="Fantasy">Fantasy</option>
                                    <option value="Historical">Historical</option>
                                    <option value="Horror">Horror</option>
                                    <option value="Romance">Romance</option>
                                    <option value="Science Fiction">Science Fiction</option>
                                    <option value="Thriller">Thriller</option>
                                    <option value="Western">Western</option>
                                    <option value="Other">Other</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>Director</th>
                            <td>
                                <input id="txtDirector" type="text" class="fm-def" style="width: 200px;" m_required="Director" />
                            </td>
                            <th>Release Time</th>
                            <td>
                                <input id="txtReleaseTime" type="text" class="fm-def" style="width: 200px;" m_required="ReleaseTime" />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="space-m"></div>

            <div class="subpage-body">
                <div id="inputField" class="tab-content flex-1 overflow-auto-y p-t-l">
                    <input id="txtTempFile_Eng" type="file" accept=".gif, .jpg, .png" onchange="m_Editor.ImageUpload(event, currentId, 'en');" style="display:none;" />
                    <input id="movieUpload" type="file" class="fm-def" style="width: 100%;" />
                </div>
            </div>
        </div>

        <div class="pop-footer">
            <div class="dp-flex">
                <div class="ml-auto">
                    <button class="btn page-btn btn-basic" onclick="insertMovieItem();">저장</button>
                    <button class="btn page-btn btn-basic" onclick="m_Popup.Close();">취소</button>
                </div>
            </div>
        </div>
    </div>
</div>
